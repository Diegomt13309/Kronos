-- MySQL Script generated by MySQL Workbench
-- jue 12 sep 2019 12:11:01 CST
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema KRONOS
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema KRONOS
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `KRONOS` DEFAULT CHARACTER SET utf8 ;
USE `KRONOS` ;

-- -----------------------------------------------------
-- Table `KRONOS`.`T_ACT`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_ACT` (
  `INDEX` INT(11) NOT NULL AUTO_INCREMENT,
  `ACTNUMBER` VARCHAR(45) NOT NULL,
  `SESSIONTYPE` VARCHAR(45) CHARACTER SET 'armscii8' NULL,
  `SESSIONDATE` DATE NOT NULL,
  `PDF` VARCHAR(45) NULL,
  `PUBLIC` TINYINT NULL,
  `ACTIVE` TINYINT NULL,
  UNIQUE INDEX `DATE_UNIQUE` (`SESSIONDATE` ASC) VISIBLE,
  UNIQUE INDEX `ACTNUMBER_UNIQUE` (`ACTNUMBER` ASC) VISIBLE,
  PRIMARY KEY (`INDEX`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRONOS`.`T_DEPARTMENT`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_DEPARTMENT` (
  `ID` INT NOT NULL,
  `NAME` VARCHAR(100) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRONOS`.`T_ACCORD`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_ACCORD` (
  `INDEX` INT(11) NOT NULL AUTO_INCREMENT,
  `ACCNUMBER` VARCHAR(45) NOT NULL,
  `INCORDATE` DATE NOT NULL,
  `DEADLINE` DATE NOT NULL,
  `SESSIONDATE` DATE NOT NULL,
  `TYPE` VARCHAR(20) NULL,
  `OBSERVATIONS` LONGTEXT NULL,
  `PUBLIC` TINYINT NULL,
  `NOTIFIED` TINYINT NULL,
  `STATE` CHAR(1) NULL,
  `DEPARTMENT` INT NULL,
  PRIMARY KEY (`INDEX`, `DEPARTMENT`),
  UNIQUE INDEX `ACCNUMBER_UNIQUE` (`ACCNUMBER` ASC) VISIBLE,
  INDEX `fk_T_ACCORD_T_DEPARTMENT1_idx` (`DEPARTMENT` ASC) VISIBLE)
ENGINE = MyISAM;


-- -----------------------------------------------------
-- Table `KRONOS`.`T_TEMPUSER`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_TEMPUSER` (
  `INDEX` INT NOT NULL,
  `NAME` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`INDEX`),
  UNIQUE INDEX `EMAIL_UNIQUE` (`EMAIL` ASC) VISIBLE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRONOS`.`T_USER`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_USER` (
  `DEPARTMENT` INT NOT NULL,
  `PASSWORD` VARCHAR(45) NULL,
  `T_TEMPUSER` VARCHAR(45) NOT NULL,
  INDEX `fk_T_USER_T_DEPARTMENT1_idx` (`DEPARTMENT` ASC) VISIBLE,
  UNIQUE INDEX `T_TEMPUSER_UNIQUE` (`T_TEMPUSER` ASC) VISIBLE,
  PRIMARY KEY (`T_TEMPUSER`),
  CONSTRAINT `fk_T_USER_T_DEPARTMENT1`
    FOREIGN KEY (`DEPARTMENT`)
    REFERENCES `KRONOS`.`T_DEPARTMENT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USER_T_TEMPUSER1`
    FOREIGN KEY (`T_TEMPUSER`)
    REFERENCES `KRONOS`.`T_TEMPUSER` (`EMAIL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRONOS`.`T_ROLE`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_ROLE` (
  `USERID` VARCHAR(100) NOT NULL,
  `ROLE` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`USERID`, `ROLE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRONOS`.`T_NOTIFICATION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_NOTIFICATION` (
  `ACCORD` VARCHAR(100) NOT NULL,
  `T_USER_T_TEMPUSER` VARCHAR(45) NOT NULL,
  INDEX `fk_T_NOTIFICATION_T_ACCORD1_idx` (`ACCORD` ASC) VISIBLE,
  PRIMARY KEY (`ACCORD`),
  INDEX `fk_T_NOTIFICATION_T_USER1_idx` (`T_USER_T_TEMPUSER` ASC) VISIBLE,
  CONSTRAINT `fk_T_NOTIFICATION_T_ACCORD1`
    FOREIGN KEY (`ACCORD`)
    REFERENCES `KRONOS`.`T_ACCORD` (`ACCNUMBER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_NOTIFICATION_T_USER1`
    FOREIGN KEY (`T_USER_T_TEMPUSER`)
    REFERENCES `KRONOS`.`T_USER` (`T_TEMPUSER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRONOS`.`T_USERACC`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_USERACC` (
  `TEMPUSER` VARCHAR(35) NOT NULL,
  `ACCORD` VARCHAR(45) NOT NULL,
  INDEX `fk_T_USERACC_T_TEMPUSER1_idx` (`TEMPUSER` ASC) VISIBLE,
  INDEX `fk_T_USERACC_T_ACCORD1_idx` (`ACCORD` ASC) VISIBLE,
  PRIMARY KEY (`TEMPUSER`, `ACCORD`),
  CONSTRAINT `fk_T_USERACC_T_TEMPUSER1`
    FOREIGN KEY (`TEMPUSER`)
    REFERENCES `KRONOS`.`T_TEMPUSER` (`INDEX`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_T_USERACC_T_ACCORD1`
    FOREIGN KEY (`ACCORD`)
    REFERENCES `KRONOS`.`T_ACCORD` (`ACCNUMBER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `KRONOS`.`T_ACCPDF`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `KRONOS`.`T_ACCPDF` (
  `ACCORD` VARCHAR(45) NOT NULL,
  `URL` VARCHAR(100) NULL,
  INDEX `fk_T_ACCPDF_T_ACCORD1_idx` (`ACCORD` ASC) VISIBLE,
  CONSTRAINT `fk_T_ACCPDF_T_ACCORD1`
    FOREIGN KEY (`ACCORD`)
    REFERENCES `KRONOS`.`T_ACCORD` (`ACCNUMBER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
